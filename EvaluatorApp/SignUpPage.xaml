<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EvaluatorApp.SignUpPage"
             Shell.NavBarIsVisible="False"
             Shell.FlyoutBehavior="Disabled"
             Shell.TabBarIsVisible="False"
             BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundLight}, Dark={StaticResource BackgroundDark}}">

    <ScrollView Orientation="Vertical" VerticalScrollBarVisibility="Never">
    <ScrollView Orientation="Vertical" VerticalScrollBarVisibility="Never">
        <Grid RowDefinitions="Auto, *" VerticalOptions="Fill" Padding="0,0,0,20">
            
            <!-- Custom Nav Bar -->
            <Grid Grid.Row="0" Padding="20,10" ColumnDefinitions="Auto, *">
                <Button Text="arrow_back_ios_new" 
                        FontFamily="MaterialIcons"
                        BackgroundColor="Transparent"
                        TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark=White}"
                        WidthRequest="40" HeightRequest="40"
                        HorizontalOptions="Start"
                        Clicked="OnBackClicked"/>
                <Label Text="Crear Cuenta" 
                       Grid.Column="1"
                       FontSize="20" FontAttributes="Bold" 
                       HorizontalOptions="Center" VerticalOptions="Center"
                       TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark=White}"
                       Margin="-40,0,0,0"/> <!-- Offset to center ignoring back button width -->
            </Grid>

            <!-- Main Content -->
            <VerticalStackLayout Grid.Row="1" Spacing="0" MaximumWidthRequest="480" HorizontalOptions="Center">
                
                <VerticalStackLayout Padding="32,20,32,40" Spacing="24">
                    
                    <!-- Icon -->
                    <VerticalStackLayout HorizontalOptions="Center" Spacing="16">
                        <Border StrokeShape="RoundRectangle 20" 
                                StrokeThickness="0"
                                BackgroundColor="{AppThemeBinding Light='#E7FDE7', Dark='#1A331A'}" 
                                HeightRequest="80" WidthRequest="80"
                                HorizontalOptions="Center">
                            <Label Text="school" 
                                   FontFamily="MaterialIcons" 
                                   FontSize="40" 
                                   TextColor="{StaticResource Primary}"
                                   HorizontalOptions="Center" VerticalOptions="Center"/>
                        </Border>
                        <Label Text="Regístrate para comenzar a evaluar proyectos integradores." 
                               FontSize="15" 
                               TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource Gray400}}"
                               HorizontalTextAlignment="Center"
                               Padding="20,0"/>
                    </VerticalStackLayout>

                    <!-- Form -->
                    <VerticalStackLayout Spacing="20">
                        
                        <!-- Full Name -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="NOMBRE COMPLETO" FontSize="11" FontAttributes="Bold" TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource Gray400}}"/>
                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="0" BackgroundColor="{AppThemeBinding Light={StaticResource Gray50}, Dark='#1E293B'}" HeightRequest="56">
                                <Grid ColumnDefinitions="50, *">
                                    <Label Text="person_outline" FontFamily="MaterialIcons" FontSize="22" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Entry x:Name="NameEntry" Grid.Column="1" Placeholder="Ej. Juan Pérez" FontSize="15" TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark=White}" VerticalOptions="Center"/>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Email -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="CORREO INSTITUCIONAL" FontSize="11" FontAttributes="Bold" TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource Gray400}}"/>
                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="0" BackgroundColor="{AppThemeBinding Light={StaticResource Gray50}, Dark='#1E293B'}" HeightRequest="56">
                                <Grid ColumnDefinitions="50, *">
                                    <Label Text="alternate_email" FontFamily="MaterialIcons" FontSize="22" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Entry x:Name="EmailEntry" Grid.Column="1" Placeholder="usuario@universidad.edu" Keyboard="Email" FontSize="15" TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark=White}" VerticalOptions="Center"/>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Department -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="CARRERA O DEPARTAMENTO" FontSize="11" FontAttributes="Bold" TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource Gray400}}"/>
                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="0" BackgroundColor="{AppThemeBinding Light={StaticResource Gray50}, Dark='#1E293B'}" HeightRequest="56">
                                <Grid ColumnDefinitions="50, *, 40">
                                    <Label Text="account_tree" FontFamily="MaterialIcons" FontSize="22" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Picker x:Name="DepartmentPicker" Grid.Column="1" Title="Selecciona una opción" FontSize="15" TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark=White}" VerticalOptions="Center">
                                        <Picker.ItemsSource>
                                            <x:Array Type="{x:Type x:String}">
                                                <x:String>Ingeniería en Sistemas</x:String>
                                                <x:String>Diseño Industrial</x:String>
                                                <x:String>Administración de Empresas</x:String>
                                                <x:String>Psicología</x:String>
                                                <x:String>Departamento de Docencia</x:String>
                                            </x:Array>
                                        </Picker.ItemsSource>
                                    </Picker>
                                    <Label Grid.Column="2" Text="expand_more" FontFamily="MaterialIcons" FontSize="22" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" VerticalOptions="Center"/>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Password -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="CONTRASEÑA" FontSize="11" FontAttributes="Bold" TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource Gray400}}"/>
                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="0" BackgroundColor="{AppThemeBinding Light={StaticResource Gray50}, Dark='#1E293B'}" HeightRequest="56">
                                <Grid ColumnDefinitions="50, *, 50">
                                    <Label Text="lock_outline" FontFamily="MaterialIcons" FontSize="22" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Entry x:Name="PasswordEntry" Grid.Column="1" Placeholder="••••••••" IsPassword="True" FontSize="15" TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark=White}" VerticalOptions="Center"/>
                                    <Label Grid.Column="2" Text="visibility_off" FontFamily="MaterialIcons" FontSize="22" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" VerticalOptions="Center">
                                        <Label.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="OnTogglePasswordVisibility"/>
                                        </Label.GestureRecognizers>
                                    </Label>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Confirm Password -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="CONFIRMAR CONTRASEÑA" FontSize="11" FontAttributes="Bold" TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource Gray400}}"/>
                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="0" BackgroundColor="{AppThemeBinding Light={StaticResource Gray50}, Dark='#1E293B'}" HeightRequest="56">
                                <Grid ColumnDefinitions="50, *">
                                    <Label Text="lock_outline" FontFamily="MaterialIcons" FontSize="22" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Entry x:Name="ConfirmPasswordEntry" Grid.Column="1" Placeholder="••••••••" IsPassword="True" FontSize="15" TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark=White}" VerticalOptions="Center"/>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>

                    </VerticalStackLayout>

                    <!-- Action Button -->
                    <Button Text="Crear Cuenta"
                            x:Name="SignUpBtn"
                            Clicked="OnSignUpClicked"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="{StaticResource Gray900}"
                            FontAttributes="Bold"
                            FontSize="16"
                            CornerRadius="14"
                            HeightRequest="56"
                            Margin="0,10,0,0"
                            ContentLayout="Right,10">
                        <Button.ImageSource>
                            <FontImageSource FontFamily="MaterialIcons" Glyph="person_add" Color="{StaticResource Gray900}" Size="20"/>
                        </Button.ImageSource>
                    </Button>

                    <!-- Footer -->
                    <Label HorizontalOptions="Center" FontSize="14" TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource Gray400}}">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="¿Ya tienes una cuenta? " />
                                <Span Text="Iniciar sesión" TextColor="{StaticResource Primary}" FontAttributes="Bold">
                                    <Span.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnBackClicked"/>
                                    </Span.GestureRecognizers>
                                </Span>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>

                     <!-- Logo (Optional background element) -->
                    <Image Source="https://lh3.googleusercontent.com/aida-public/AB6AXuA-nYpT8PZVHyHmlemJNbB6nzZmPrpi9rToN4EzErVRsxnVOgt5hPjebhF0a-sZAod2P3Yk5yIw-4diAyjTBTtbhNGrjhtnTKtY-rNeSULv-xKV68IbBY21N-NC_fRYBFH29rFNXhmDz6AhNxuTwdeb51Fk8xwCRhQYD-l0nUbv_E5Y-BN7-NK0X1S4h6F2qeVO2QnPw5atX3vSdvFUcMZ-6yMbQ21Zlrkk2Ch6N270yhKdYPLWf1-Qq3y7DUKAfRXrq0FYOY7Tmr8"
                           HeightRequest="60"
                           Opacity="0.05"
                           Margin="0,20,0,0"/>

                </VerticalStackLayout>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
    </ScrollView>
</ContentPage>
